<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <title>Attention Check</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* Custom color for header */
        .custom-header {
            background-color: rgb(0, 80, 180); /* Dark blue background */
            color: white; /* White text */
            padding: 15px 20px; /* Added padding for spacing */
            text-align: center; /* Center the header text */
        }

        /* Custom color for button */
        .custom-btn {
            background-color: rgb(0, 80, 180); 
            border: none;
            color: white; /* White text on the button */
            padding: 12px 20px; /* Add padding to the button */
            font-size: 16px; /* Font size for button text */
            width: 20%; /* Make the button span the full width */
        }

        .custom-btn:hover {
            background-color: rgb(5, 40, 80); /* Darker blue when hovered */
            color: white;
        }

        .submit-btn-container {
            display: flex;
            justify-content: center; /* Align the button to the center horizontally */
            margin-top: 20px; /* Add space above the button */
        }
    </style>

</head>


<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    
                    <div class="card-header custom-header">
                        <h3>Instruction</h3> 
                    </div> 

                    <div class="card-body">

                        <p class="mt-3 mb-3 text-muted fst-italic">Please read the information carefully to answer the question.</p>

                        <p class="mb-4">
                            The next question is about the following problem. In questionnaires like ours, sometimes
                            there are participants who do not carefully read the questions and just quickly click
                            through the survey. This means that there are a lot of random answers which compromise the
                            results of research studies. To show that you read the provided information carefully, please choose
                            both Others and Agree options as your answer to the next question.
                        </p>

                        <form method="POST" action="{{ url_for('survey_bp.educating') }}" id="attentionCheckForm">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <p class="mb-3"><strong>To what extent do you agree that train is better than bus?</strong></p>

                            <div id="checkboxContainer">
                                <!-- Checkboxes will be inserted here via JS -->
                            </div>

                            <div class="submit-btn-container">
                                <button type="submit" class="btn custom-btn">Submit</button>
                            </div>
                        </form>

                        
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const options = [
            { id: "strongDisagree", label: "Strongly Disagree", value: "Strongly Disagree" },
            { id: "disagree", label: "Disagree", value: "Disagree" },
            { id: "neutral", label: "Neutral", value: "Neutral" },
            { id: "agree", label: "Agree", value: "Agree" },
            { id: "strongAgree", label: "Strongly Agree", value: "Strongly Agree" },
            { id: "others", label: "Others", value: "Others" },
        ];

        // Shuffle array
        /*
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }
        */

        // Inject shuffled checkboxes into the DOM
        window.onload = function () {
            //shuffle(options);
            const container = document.getElementById("checkboxContainer");
            options.forEach(opt => {
                const div = document.createElement("div");
                div.className = "form-check";

                const input = document.createElement("input");
                input.className = "form-check-input";
                input.type = "checkbox";
                input.name = "answer";
                input.id = opt.id;
                input.value = opt.value;

                const label = document.createElement("label");
                label.className = "form-check-label";
                label.htmlFor = opt.id;
                label.textContent = opt.label;

                div.appendChild(input);
                div.appendChild(label);
                container.appendChild(div);
            });
        };

        // Validate on submit
        document.getElementById("attentionCheckForm").addEventListener("submit", function (event) {
            const checkboxes = document.querySelectorAll('input[name="answer"]:checked');
            const selectedValues = Array.from(checkboxes).map(cb => cb.value);

            if (!(selectedValues.includes("Agree") && selectedValues.includes("Others") && selectedValues.length === 2)) {
                event.preventDefault();
                alert("Your answer is not correct, please read the question again.");
            }
        });
    </script>
</body>

</html>